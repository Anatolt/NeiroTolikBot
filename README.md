план
+ сделать генерацию картинок
+ добавить реакцию на кастомный промт
+ помнить контекст в пределах последних нескольких сообщений
- суммаризировать контекст и сохранять его в бд
- я использую второго бота для тестов и понял что надо вынести это в env
- добавить реагирование на английские ключевики
- поставить бесплатную модель на роутинг запросов вместо кода
+ разобраться с перечнем моделей
- вынести генерацию картинок в отдельный файл
- разнести остальные функции по отдельным файлам
- добавить сети для генерации картинок
- научить бота ходить на сайты
- писать когда бот остановлен 
- научить бота запускать сразу несколько моделей
- запилить монетизацию

# NeiroTolikBot

Telegram бот с поддержкой генерации текста через OpenRouter и изображений через PiAPI.ai.

## Структура проекта

```
NeiroTolikBot/
├── handlers/              # Обработчики команд и сообщений
│   ├── commands.py       # Обработчики команд (например, /start)
│   └── messages.py       # Обработчики сообщений и логика маршрутизации
├── services/             # Сервисы генерации и другие сервисы
│   ├── generation.py     # Функции для генерации текста и изображений
│   └── memory.py        # Управление памятью и контекстом диалогов
├── utils/                # Вспомогательные функции
│   └── helpers.py        # Утилиты (экранирование, инициализация)
├── config.py            # Конфигурация бота
├── tbot.py              # Основной файл бота
├── .env                 # Переменные окружения
└── README.md           # Документация
```

## Установка и запуск

1. Клонируйте репозиторий
2. Установите зависимости:
   ```bash
   pip install -r requirements.txt
   ```
3. Создайте файл `.env` со следующими переменными:
   ```
   TELEGRAM_BOT_TOKEN=ваш_токен_бота
   OPENROUTER_API_KEY=ваш_ключ_openrouter
   PIAPI_KEY=ваш_ключ_piapi (опционально)
   CUSTOM_SYSTEM_PROMPT=ваш_промпт (опционально)
   ```
4. Запустите бота:
   ```bash
   python tbot.py
   ```

## Возможности

- Генерация текста через различные модели (ChatGPT, Claude, DeepSeek)
- Генерация изображений через PiAPI.ai
- Работа в группах (требуется упоминание бота)
- Гибкая маршрутизация запросов
- Управление памятью и контекстом диалогов

## Использование

1. В личных сообщениях:
   - Просто напишите свой вопрос
   - Укажите модель в начале или конце запроса
   - Для генерации изображений используйте ключевые слова "нарисуй" или "сгенерируй картинку"

2. В группах:
   - Упомяните бота в начале сообщения
   - Используйте те же команды, что и в личных сообщениях

3. Управление памятью:
   - `/new` - Начать новый диалог (сохраняет историю для будущего использования)
   - `/clear` - Полностью очистить память бота
   - `/help` - Показать справку по командам